version: 2

models:
  - name: customer_retention_cohorts
    description: >
      **Customer Cohort Retention Analysis**

      Monthly cohort retention metrics showing customer retention rates over time.
      Each cohort is defined by the month of first order, with retention tracked
      for subsequent months.

      **Grain**: One row per cohort month + months since first order combination

      **Use Cases**:
      - Retention curve analysis
      - Cohort comparison
      - Customer lifetime value projections
      - Product/marketing impact on retention
    meta:
      owner: analytics
      domain: customer_analytics
    columns:
      - name: cohort_month
        description: First day of the month when customers in this cohort first ordered
        data_tests:
          - not_null

      - name: months_since_first_order
        description: Number of months elapsed since cohort's first order month
        data_tests:
          - not_null

      - name: cohort_size
        description: Total number of unique customers in this cohort (month 0)
        data_tests:
          - not_null

      - name: customers_in_period
        description: Number of customers from cohort who ordered in this period

      - name: orders_in_period
        description: Total orders placed by cohort members in this period

      - name: revenue_in_period
        description: Total revenue generated by cohort members in this period

      - name: retention_rate
        description: Percentage of cohort that ordered in this period (customers_in_period / cohort_size)
