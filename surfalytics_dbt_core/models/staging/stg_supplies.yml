version: 2

models:
  - name: stg_supplies
    description: >
      Staging model for supply bill of materials.
      Maps individual supply items (ingredients, packaging) to products.
      One row per supply-product combination.
      Cost has been converted from cents to dollars.
    columns:
      - name: supply_id
        description: Supply item identifier (not unique - same supply can be used for multiple products)
        data_tests:
          - not_null

      - name: supply_name
        description: Supply item name
        data_tests:
          - not_null

      - name: cost
        description: Cost of this supply item in dollars
        data_tests:
          - not_null

      - name: perishable
        description: Boolean flag indicating if supply item is perishable
        data_tests:
          - not_null

      - name: sku
        description: Foreign key to products
        data_tests:
          - not_null
          - relationships:
              arguments:
                to: ref('stg_products')
                field: sku
      - name: _loaded_at
        description: Timestamp when this record was loaded into staging